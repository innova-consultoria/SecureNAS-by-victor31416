‚úÖ CHECKLIST DETALLADO - PROYECTO SNAS by victor31416
üìä ESTADO GLOBAL: FASE 0 COMPLETADA ‚úÖ
üîç FASE 0: AN√ÅLISIS DEL ESTADO ACTUAL - COMPLETADA
‚úÖ TODAS LAS TAREAS COMPLETADAS

0.1 - Auditor√≠a completa de hardware (CPU, RAM, Discos)

0.2 - Diagn√≥stico SMART de todos los discos

0.3 - Verificaci√≥n estado ZFS pool nas

0.4 - An√°lisis configuraci√≥n red actual

0.5 - Inventario servicios y puertos activos

0.6 - Identificaci√≥n riesgos seguridad

0.7 - Descarte falso positivo disco fallido

0.8 - Validaci√≥n sistema listo para Fase 1

üîê FASE 1: SEGURIDAD BASE - EN PROGRESO
1.1 PLANIFICACI√ìN SEGURIDAD
1.1.1 - Decidir firewall: OPNsense vs pfSense

1.1.2 - Definir nuevo puerto SSH (no 22)

1.1.3 - Planificar estructura VLANs

1.1.4 - Confirmar recursos para VM firewall (2GB RAM)

1.2 IMPLEMENTACI√ìN FIREWALL
1.2.1 - Descargar ISO OPNsense/pfSense

1.2.2 - Crear VM-100 (firewall) en Proxmox

1.2.3 - Configurar 2 interfaces red (WAN/LAN)

1.2.4 - Instalar sistema firewall

1.2.5 - Configurar IP gesti√≥n (ej: 192.168.1.100)

1.2.6 - Establecer reglas firewall base

1.2.7 - Configurar DHCP server en firewall

1.3 HARDENING SSH
1.3.1 - Backup configuraci√≥n SSH actual

1.3.2 - Cambiar puerto SSH (22 ‚Üí nuevo_puerto)

1.3.3 - Deshabilitar login root directo

1.3.4 - Configurar autenticaci√≥n por claves SSH

1.3.5 - Instalar y configurar fail2ban

1.3.6 - Reiniciar servicio SSH y verificar

1.3.7 - Actualizar reglas firewall nuevo puerto

1.4 BACKUP CONFIGURACI√ìN CR√çTICA
1.4.1 - Backup configuraci√≥n Proxmox

1.4.2 - Backup configuraci√≥n ZFS pool

1.4.3 - Backup configuraci√≥n red

1.4.4 - Documentar acceso emergencia

1.5 MONITORIZACI√ìN BASE
1.5.1 - Verificar Netdata operativo (puerto 19999)

1.5.2 - Configurar alertas b√°sicas

1.5.3 - Monitorizar recursos sistema

üöÄ FASE 2: SERVICIOS CORE
2.1 ADGUARD HOME (DNS + FILTRADO)
2.1.1 - Crear LXC-1 (Debian 12) - 512MB RAM

2.1.2 - Configurar IP est√°tica (192.168.1.53)

2.1.3 - Instalar AdGuard Home

2.1.4 - Configurar como servidor DNS (puerto 53)

2.1.5 - Agregar listas bloqueo anuncios

2.1.6 - Configurar clientes DNS en firewall

2.1.7 - Probar filtrado DNS

2.2 VPN WIREGUARD
2.2.1 - Crear LXC-2 (Debian 12) - 512MB RAM

2.2.2 - Configurar IP est√°tica (192.168.1.54)

2.2.3 - Instalar WireGuard

2.2.4 - Generar claves servidor y clientes

2.2.5 - Configurar interfaz VPN (10.8.0.1/24)

2.2.6 - Abrir puerto 51820 UDP en firewall

2.2.7 - Configurar 2-3 clientes prueba

2.2.8 - Probar conectividad remota

2.3 NEXTCLOUD HARDENING
2.3.1 - Crear LXC-3 (Debian 12) - 4GB RAM

2.3.2 - Configurar IP est√°tica (192.168.1.55)

2.3.3 - Montar dataset ZFS nas/nc

2.3.4 - Instalar stack LAMP/LEMP

2.3.5 - Instalar y configurar Nextcloud

2.3.6 - Configurar PostgreSQL database

2.3.7 - Implementar SSL/TLS (certificado)

2.3.8 - Configurar pol√≠ticas seguridad

2.3.9 - Probar acceso web y sincronizaci√≥n

2.4 MONITORIZACI√ìN AVANZADA
2.4.1 - Instalar Zabbix Agent en todos los sistemas

2.4.2 - Configurar alertas por email

2.4.3 - Dashboard consolidado servicios

üé¨ FASE 3: SERVICIOS AVANZADOS
3.1 PLATAFORMA MULTIMEDIA
3.1.1 - Decidir plataforma: Jellyfin vs Plex

3.1.2 - Crear LXC/VM multimedia - 2GB RAM

3.1.3 - Configurar IP est√°tica (192.168.1.56)

3.1.4 - Montar dataset ZFS nas/media

3.1.5 - Instalar Jellyfin/Plex

3.1.6 - Configurar bibliotecas multimedia

3.1.7 - Optimizar transcodificaci√≥n hardware (Intel HD 530)

3.1.8 - Configurar acceso seguro (HTTPS)

3.1.9 - Probar streaming local/remoto

3.2 SISTEMA DOM√ìTICA
3.2.1 - Crear LXC-4 (Debian 12) - 1GB RAM

3.2.2 - Configurar IP est√°tica (192.168.1.57)

3.2.3 - Instalar Home Assistant

3.2.4 - Configurar VLAN IOT (192.168.30.0/24)

3.2.5 - Integrar dispositivos IOT iniciales

3.2.6 - Configurar automatizaciones b√°sicas

3.2.7 - Dashboard control dom√≥tica

3.3 BACKUP AUTOMATIZADO
3.3.1 - Configurar backups Proxmox autom√°ticos

3.3.2 - Programar backups diarios LXC/VM

3.3.3 - Configurar retenci√≥n (diario 7d, semanal 4w, mensual 12m)

3.3.4 - Implementar backup configuraciones

3.3.5 - Verificar restauraci√≥n desde backup

üîß FASE 4: OPTIMIZACI√ìN Y MANTENIMIENTO
4.1 OPTIMIZACI√ìN RENDIMIENTO
4.1.1 - Ajustar par√°metros ZFS (recordsize, compression)

4.1.2 - Optimizar memoria y swap

4.1.3 - Configurar tuneo red

4.1.4 - Optimizar servicios cr√≠ticos

4.2 SEGURIDAD AVANZADA
4.2.1 - Implementar 2FA para acceso web

4.2.2 - Configurar IDS/IPS (Suricata)

4.2.3 - Auditor√≠a seguridad completa

4.2.4 - Rotaci√≥n claves y certificados

4.3 MONITORIZACI√ìN COMPLETA
4.3.1 - Implementar Grafana + Prometheus

4.3.2 - Configurar dashboards personalizados

4.3.3 - Alertas proactivas (espacio, carga, errores)

4.3.4 - Monitorizaci√≥n externa (Healthchecks)

4.4 BACKUP 3-2-1
4.4.1 - Configurar replicaci√≥n ZFS a disco externo

4.4.2 - Implementar backup en cloud (opcional)

4.4.3 - Documentar procedimiento recuperaci√≥n

4.4.4 - Test recuperaci√≥n desastres completo

4.5 DOCUMENTACI√ìN FINAL
4.5.1 - Documentar arquitectura completa

4.5.2 - Manuales operativos por servicio

4.5.3 - Procedimientos emergencia

4.5.4 - Plan mantenimiento peri√≥dico

üìã CHECKLIST MANTENIMIENTO PERI√ìDICO
DIARIO:
Revisar alertas cr√≠ticas

Verificar estado backups

Comprobar espacio disco

Revisar logs seguridad

SEMANAL:
Actualizaciones seguridad

Limpieza logs/temporales

Verificaci√≥n integridad ZFS

Test servicios cr√≠ticos

MENSUAL:
Scrub ZFS programado

Auditor√≠a seguridad

Test restauraci√≥n backup

Rotaci√≥n claves

ANUAL:
Revisi√≥n hardware

Actualizaci√≥n mayor software

Test recuperaci√≥n desastres

Review pol√≠ticas

üéØ PR√ìXIMOS PASOS INMEDIATOS:
FASE 1.1 - PRIORIDAD ALTA:

Decidir: OPNsense vs pfSense

Definir: Nuevo puerto SSH

Ejecutar: pvesh get /cluster/resources --type vm --type lxc

Confirmar: Recursos para VM firewall
